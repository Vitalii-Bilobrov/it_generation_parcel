{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,iEACMC,EAAYC,SAASC,cAAc,YACnCC,EAASF,SAASC,cAAc,mBAEpCE,EAAQ,IAAAC,QACRC,EAAK,IAAAD,QACLE,EAAS,IAAAF,QACTG,EAAM,IAAAH,QACNI,EAAa,IAAAJ,QAgCTK,EAAc,IAAjB,W,sBArCGC,I,aACJC,EAAAC,EAAA,CAAAC,KAAAV,EAAQ,C,kBAAG,gDACXQ,EAAAC,EAAA,CAAAC,KAAAR,EAAK,C,kBAAG,IACRM,EAAAC,EAAA,CAAAC,KAAAP,EAAS,C,kBAAG,KACZK,EAAAC,EAAA,CAAAC,KAAAN,EAAM,C,kBAAG,KACTI,EAAAC,EAAA,CAAAC,KAAAL,EAAa,C,kBAAG,G,iBAEhBM,IAAA,Y,MAAA,WACE,OAAOC,MACL,oDAAkDC,OAAAL,EAAAM,EAAA,CAAEJ,KAAMV,GAAQ,UAAlEa,OAAAL,EAAAM,EAAA,CACEJ,KAAMR,GACP,WAFDW,OAAAL,EAAAM,EAAA,CAEUJ,KAAMN,GAAM,cAA2BS,OAAAL,EAAAM,EAAA,CAAfJ,KAAMP,KACxCY,MAAK,SAAAC,GACL,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,QAE3B,OAAOH,EAASI,M,OAIhBT,IAAA,Q,IAAJ,WACE,OAAAH,EAAAM,EAAA,CAAOJ,KAAMN,E,MAGf,SAAUiB,G,UACFjB,EAAQiB,E,IAGhBV,IAAA,W,MAAA,SAASW,G,UACDjB,EAAeiB,E,IAGvBX,IAAA,kB,MAAA,WACE,OAAOH,EAAAM,EAAA,CAAAJ,KAAMR,GAAOqB,KAAKC,KAAKhB,EAAAM,EAAA,CAAAJ,KAAML,GAAYG,EAAAM,EAAA,CAAGJ,KAAMP,G,OAI1D,IAkCHJ,EAAO0B,iBAAiB,UAvBxB,SAAuBC,GACrBA,EAAMC,iBACN,IAGMC,EADFF,EAAMG,OADRC,SAAYC,MAEYC,MAAMC,cAAcC,OAC9C,IAAKN,EACH,OAAOpB,EAAA2B,GAASC,OAAOC,QAAQ,cAEjC/B,EAAYyB,MAAQH,EACpBtB,EAAYgC,YAAYvB,MAAK,SAAAwB,GAC3B,GAA4B,IAAxBA,EAAKC,QAAQC,OAAjB,CAIAnC,EAAYoC,SAASH,EAAKjB,OAC1B,IAAMqB,EAAiBrC,EAAYsC,kBAEnCC,QAAQC,IAAI,kBAAmBH,GAC/B/C,EAAUmD,UAAyBR,EAAKC,QA1BvCQ,KACC,SAAAC,G,IAAGC,EAAID,EAAJC,KAAMC,EAAeF,EAAfE,gB,MAA+B,6CACVtC,OAApBqC,EAAKE,MAAM,WAAyBvC,OAAhBsC,EAAgB,gC,IAG/CE,KAAK,G,MAcJ7C,EAAA2B,GAASC,OAAOC,QAAQ,gB","sources":["src/js/photos.js"],"sourcesContent":["import Notiflix from 'notiflix';\nconst galleryEL = document.querySelector('.gallery');\nconst formEl = document.querySelector('.js-search-form');\nclass UnsplashApi {\n  #API_KEY = 'gEopSExvxGRBacvbCX5khX4G6aHTWmEvx0oJJ4DvPUk';\n  #page = 1;\n  #per_page = 25;\n  #query = '';\n  #total_photos = 0;\n\n  getPhotos() {\n    return fetch(\n      `https://api.unsplash.com/search/photos?client_id=${this.#API_KEY}&page=${\n        this.#page\n      }&query=${this.#query}&per_page=${this.#per_page}`\n    ).then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    });\n  }\n\n  get query() {\n    return this.#query;\n  }\n\n  set query(newQuery) {\n    this.#query = newQuery;\n  }\n\n  setTotal(total) {\n    this.#total_photos = total;\n  }\n\n  morePagesExists() {\n    return this.#page < Math.ceil(this.#total_photos / this.#per_page);\n  }\n}\n\nconst unsplashApi = new UnsplashApi();\n\nfunction createMarkup(photos) {\n  return photos\n    .map(\n      ({ urls, alt_description }) => /*html*/ `<li class=\"gallery__item\">\n    <img src=\"${urls.small}\" alt=\"${alt_description}\" class=\"gallery-img\">\n</li>`\n    )\n    .join('');\n}\nfunction onInputSubmit(event) {\n  event.preventDefault();\n  const {\n    elements: { query },\n  } = event.target;\n  const searchValue = query.value.toLowerCase().trim();\n  if (!searchValue) {\n    return Notiflix.Notify.failure('Input word');\n  }\n  unsplashApi.query = searchValue;\n  unsplashApi.getPhotos().then(data => {\n    if (data.results.length === 0) {\n      Notiflix.Notify.failure('Nothing found');\n      return;\n    }\n    unsplashApi.setTotal(data.total);\n    const haveMorePhotos = unsplashApi.morePagesExists();\n\n    console.log('haveMorePhotos:', haveMorePhotos);\n    galleryEL.innerHTML = createMarkup(data.results);\n  });\n}\n\nformEl.addEventListener('submit', onInputSubmit);\n"],"names":["$8MBJY","parcelRequire","$a48beeac1a53192f$var$galleryEL","document","querySelector","$a48beeac1a53192f$var$formEl","$a48beeac1a53192f$var$_API_KEY","WeakMap","$a48beeac1a53192f$var$_page","$a48beeac1a53192f$var$_per_page","$a48beeac1a53192f$var$_query","$a48beeac1a53192f$var$_total_photos","$a48beeac1a53192f$var$unsplashApi","UnsplashApi","$parcel$interopDefault","$8MQK7","this","key","fetch","concat","$4KMWL","then","response","ok","Error","status","json","newQuery","total","Math","ceil","addEventListener","event","preventDefault","searchValue","target","elements","query","value","toLowerCase","trim","$iU1Pc","Notify","failure","getPhotos","data","results","length","setTotal","haveMorePhotos","morePagesExists","console","log","innerHTML","map","param","urls","alt_description","small","join"],"version":3,"file":"photos.b68e7c08.js.map"}