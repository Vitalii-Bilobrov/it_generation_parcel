{"mappings":"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","sources":["src/js/photos/photos.js","src/js/photos/UnsplashApi.js","<<jsx-config-pragma.js>>","src/js/photos/createMarkup.js","src/js/photos/refs.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport { UnsplashApi } from './UnsplashApi';\nimport { createMarkup } from './createMarkup';\nimport { refs } from './refs';\n\nconst unsplashApi = new UnsplashApi();\n\nconst options = {\n  root: null,\n  rootMargin: '100px',\n  threshold: 1.0,\n};\nconst loadMorePhotos = function (entries, observer) {\n  entries.forEach(entry => {\n    if (entry.isIntersecting) {\n      observer.unobserve(entry.target);\n      unsplashApi.incrementPage();\n      unsplashApi.getPhotos().then(data => {\n        if (data.results.length === 0) {\n          Notiflix.Notify.failure('Nothing found');\n          return;\n        }\n\n        refs.galleryEL.insertAdjacentHTML(\n          'beforeend',\n          createMarkup(data.results)\n        );\n        const haveMorePhotos = unsplashApi.morePagesExists();\n        if (haveMorePhotos) {\n          const item = document.querySelector('.gallery__item:last-child');\n          observer.observe(item);\n        }\n      });\n    }\n  });\n};\n\nconst io = new IntersectionObserver(loadMorePhotos, options);\n\nfunction onInputSubmit(event) {\n  event.preventDefault();\n  const {\n    elements: { query },\n  } = event.target;\n  const searchValue = query.value.toLowerCase().trim();\n  if (!searchValue) {\n    return Notiflix.Notify.failure('Input word');\n  }\n  unsplashApi.resetPage();\n  refs.galleryEL.innerHTML = '';\n\n  unsplashApi.query = searchValue;\n  unsplashApi.getPhotos().then(data => {\n    if (data.results.length === 0) {\n      Notiflix.Notify.failure('Nothing found');\n      return;\n    }\n    unsplashApi.setTotal(data.total);\n\n    refs.galleryEL.innerHTML = createMarkup(data.results);\n    const haveMorePhotos = unsplashApi.morePagesExists();\n    if (haveMorePhotos) {\n      const item = document.querySelector('.gallery__item:last-child');\n      io.observe(item);\n    }\n  });\n  event.target.reset();\n}\n\nrefs.formEl.addEventListener('submit', onInputSubmit);\n","export class UnsplashApi {\n  #API_KEY = 'gEopSExvxGRBacvbCX5khX4G6aHTWmEvx0oJJ4DvPUk';\n  #page = 1;\n  #per_page = 25;\n  #query = '';\n  #total_photos = 0;\n\n  getPhotos() {\n    return fetch(\n      `https://api.unsplash.com/search/photos?client_id=${this.#API_KEY}&page=${\n        this.#page\n      }&query=${this.#query}&per_page=${this.#per_page}`\n    ).then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    });\n  }\n\n  get query() {\n    return this.#query;\n  }\n\n  set query(newQuery) {\n    this.#query = newQuery;\n  }\n\n  setTotal(total) {\n    this.#total_photos = total;\n  }\n\n  morePagesExists() {\n    return this.#page < Math.ceil(this.#total_photos / this.#per_page);\n  }\n  incrementPage() {\n    this.#page += 1;\n  }\n  resetPage() {\n    this.#page = 1;\n  }\n}\n",null,"export function createMarkup(photos) {\n  return photos\n    .map(\n      ({ urls, alt_description }) => /*html*/ `<li class=\"gallery__item\">\n    <img src=\"${urls.small}\" alt=\"${alt_description}\" class=\"gallery-img\">\n</li>`\n    )\n    .join('');\n}\n","export const refs = {\n  galleryEL: document.querySelector('.gallery'),\n  formEl: document.querySelector('.js-search-form'),\n};\n"],"names":["$iU1Pc","parcelRequire","$8MBJY","$45d4a16778fc3f06$var$_API_KEY","WeakMap","$45d4a16778fc3f06$var$_page","$45d4a16778fc3f06$var$_per_page","$45d4a16778fc3f06$var$_query","$45d4a16778fc3f06$var$_total_photos","$45d4a16778fc3f06$export$3f0c69c065e5b121","UnsplashApi","$parcel$interopDefault","$8MQK7","this","key","fetch","concat","$4KMWL","then","response","ok","Error","status","json","newQuery","total","Math","ceil","$1f9dae579d579506$export$24783e9f3a24abe4","photos","map","param","urls","alt_description","small","join","$426d1b513965f12f$export$21666b427502ea6d","galleryEL","document","querySelector","formEl","$fad129163afa3699$var$unsplashApi","$fad129163afa3699$var$io","IntersectionObserver","entries","observer","forEach","entry","isIntersecting","unobserve","target","incrementPage","getPhotos","data","results","length","insertAdjacentHTML","morePagesExists","item","observe","Notify","failure","root","rootMargin","threshold","addEventListener","event","preventDefault","searchValue","elements","query","value","toLowerCase","trim","resetPage","innerHTML","setTotal","reset"],"version":3,"file":"photos.5d5fb151.js.map"}